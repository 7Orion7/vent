machine:
  services:
    - docker
    - elasticsearch
    - rabbitmq-server
    - redis
checkout:
  post:
    - git submodule sync --recursive
    - git submodule update --recursive --init
dependencies:
  pre:
    # necessary to fix curses import
    - sudo apt-get install -y libncurses5 libncurses5-dev libncursesw5
    - pyenv uninstall -f 2.7.11
    - pyenv install 2.7.11
    - chmod -R 777 /home/ubuntu/vent
    - PYTHONPATH="${PYTHONPATH}:/home/ubuntu/"; export PYTHONPATH
test:
  override:
    - make test
    - make
  post:
    - bash <(curl -s https://codecov.io/bash)
